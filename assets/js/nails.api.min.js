var NAILS_API;NAILS_API=function(){this._api_base="",this._hash="",this._guid="",this._csrf_cookie="nailscsrftoken",this._csrf_token="nailscsrftest",this.init=function(e,t){this._hash=e,this._guid=t,this._api_base=window.SITE_URL+"api/"},this.call=function(e,t,n,i,o,d,s){var a={};if("object"==typeof e){if(a=e,"undefined"==typeof a.controller)throw new Error("Controller not defined");if("undefined"==typeof a.method)throw new Error("Method not defined");"undefined"==typeof a.data&&(a.data={}),"undefined"==typeof a.success&&(a.success=function(){}),"undefined"==typeof a.error&&(a.error=function(){}),"undefined"==typeof a.action&&(a.action="GET"),"undefined"==typeof a.async&&(a.async=!0)}else a.controller="undefined"==typeof e?"":e,a.method="undefined"==typeof t?"":t,a.data="undefined"==typeof n?{}:n,a.success="undefined"==typeof i?function(){}:i,a.error="undefined"==typeof o?function(){}:o,a.action="undefined"==typeof d?"GET":d,a.async="undefined"==typeof s?!0:s;if("POST"===a.action){var f=$.cookie(this._csrf_cookie);if("string"==typeof f&&f.length>0){var r={};r[this._csrf_token]=f,a.data=$.extend({},a.data,r)}}var c={api_token:this._hash,api_guid:this._guid};a.data=$.extend({},a.data,c),$.ajax({url:this._api_base+a.controller+"/"+a.method,data:a.data,dataType:"json",success:a.success,error:a.error,type:a.action,async:a.async})}};