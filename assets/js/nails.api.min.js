var NAILS_API;NAILS_API=function(){this._api_base=window.SITE_URL+"api/",this._csrf_cookie="nailscsrftoken",this._csrf_token="nailscsrftest",this.set_base=function(e){this._api_base=e},this.call=function(e,n,t,o,i,f,d){var s={};if("object"==typeof e){if(s=e,"undefined"==typeof s.controller)throw new Error("Controller not defined");if("undefined"==typeof s.method)throw new Error("Method not defined");"undefined"==typeof s.data&&(s.data={}),"undefined"==typeof s.success&&(s.success=function(){}),"undefined"==typeof s.error&&(s.error=function(){}),"undefined"==typeof s.action&&(s.action="GET"),"undefined"==typeof s.async&&(s.async=!0)}else s.controller="undefined"==typeof e?"":e,s.method="undefined"==typeof n?"":n,s.data="undefined"==typeof t?{}:t,s.success="undefined"==typeof o?function(){}:o,s.error="undefined"==typeof i?function(){}:i,s.action="undefined"==typeof f?"GET":f,s.async="undefined"==typeof d?!0:d;if("POST"===s.action){var a=$.cookie(this._csrf_cookie);if("string"==typeof a&&a.length>0){var r={};r[this._csrf_token]=a,s.data=$.extend({},s.data,r)}}$.ajax({url:this._api_base+s.controller+"/"+s.method,data:s.data,dataType:"json",success:s.success,error:s.error,type:s.action,async:s.async})}};