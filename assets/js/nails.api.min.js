var NAILS_API;NAILS_API=function(){this.api_base=window.SITE_URL+"api/",this.hash="",this.guid="",this.init=function(e,t){this.hash=e,this.guid=t,"https:"===document.location.protocol&&(this.api_base=this.api_base.replace("http://","https://"))},this.call=function(e,t,n,o,i,d,a){var s={};if("object"==typeof e){if(s=e,"undefined"==typeof s.controller)throw new Error("Controller not defined");if("undefined"==typeof s.method)throw new Error("Method not defined");"undefined"==typeof s.data&&(s.data={}),"undefined"==typeof s.success&&(s.success=function(){}),"undefined"==typeof s.error&&(s.error=function(){}),"undefined"==typeof s.action&&(s.action="GET"),"undefined"==typeof s.async&&(s.async=!0)}else s.controller="undefined"==typeof e?"":e,s.method="undefined"==typeof t?"":t,s.data="undefined"==typeof n?{}:n,s.success="undefined"==typeof o?function(){}:o,s.error="undefined"==typeof i?function(){}:i,s.action="undefined"==typeof d?"GET":d,s.async="undefined"==typeof a?!0:a;var f={api_token:this.hash,api_guid:this.guid};s.data=$.extend({},s.data,f),$.ajax({url:this.api_base+s.controller+"/"+s.method,data:s.data,dataType:"json",success:s.success,error:s.error,type:s.action,async:s.async})}};