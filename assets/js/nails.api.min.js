var NAILS_API;NAILS_API=function(){this._api_base="",this._hash="",this._guid="",this._csrf_cookie="nailscsrftoken",this._csrf_token="nailscsrftest",this.init=function(e,t){this._hash=e,this._guid=t,this._api_base="https:"===document.location.protocol?window.SITE_URL+"api/":window.SECURE_SITE_URL+"api/"},this.call=function(e,t,n,o,i,d,a){var s={};if("object"==typeof e){if(s=e,"undefined"==typeof s.controller)throw new Error("Controller not defined");if("undefined"==typeof s.method)throw new Error("Method not defined");"undefined"==typeof s.data&&(s.data={}),"undefined"==typeof s.success&&(s.success=function(){}),"undefined"==typeof s.error&&(s.error=function(){}),"undefined"==typeof s.action&&(s.action="GET"),"undefined"==typeof s.async&&(s.async=!0)}else s.controller="undefined"==typeof e?"":e,s.method="undefined"==typeof t?"":t,s.data="undefined"==typeof n?{}:n,s.success="undefined"==typeof o?function(){}:o,s.error="undefined"==typeof i?function(){}:i,s.action="undefined"==typeof d?"GET":d,s.async="undefined"==typeof a?!0:a;if("POST"===s.action){var f=$.cookie(this._csrf_cookie);if("string"==typeof f&&f.length>0){var r={};r[this._csrf_token]=f,s.data=$.extend({},s.data,r)}}var c={api_token:this._hash,api_guid:this._guid};s.data=$.extend({},s.data,c),$.ajax({url:this._api_base+s.controller+"/"+s.method,data:s.data,dataType:"json",success:s.success,error:s.error,type:s.action,async:s.async})}};