/**
 * api.js
 *
 * This class handles API requests
 *
 * Author: Pablo de la Pe√±a (@hellopablo)
 *
 **/var NAILS_API;NAILS_API=function(){this.api_base=window.SITE_URL+"api/";this.hash="";this.guid="";this.init=function(e,t){this.hash=e;this.guid=t;document.location.protocol==="https:"&&(this.api_base=this.api_base.replace("http://","https://"))};this.call=function(e,t,n,r,i,s,o){var u={};if(typeof e=="object"){u=e;if(typeof u.controller=="undefined")throw new Error("Controller not defined");if(typeof u.method=="undefined")throw new Error("Method not defined");typeof u.data=="undefined"&&(u.data={});typeof u.success=="undefined"&&(u.success=function(){});typeof u.error=="undefined"&&(u.error=function(){});typeof u.action=="undefined"&&(u.action="GET");typeof u.async=="undefined"&&(u.async=!0)}else{u.controller=typeof e=="undefined"?"":e;u.method=typeof t=="undefined"?"":t;u.data=typeof n=="undefined"?{}:n;u.success=typeof r=="undefined"?function(){}:r;u.error=typeof i=="undefined"?function(){}:i;u.action=typeof s=="undefined"?"GET":s;u.async=typeof o=="undefined"?!0:o}var a={api_token:this.hash,api_guid:this.guid};u.data=$.extend({},u.data,a);$.ajax({url:this.api_base+u.controller+"/"+u.method,data:u.data,dataType:"json",success:u.success,error:u.error,type:u.action,async:u.async})}};