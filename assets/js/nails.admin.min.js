//	Catch undefined console
/* jshint ignore:start */if(typeof console=="undefined"){var console;console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}}var NAILS_Admin;NAILS_Admin=function(){this.error_delay=6e3;this.init=function(){this.init_boxes();this.init_navsearch();this.init_search_boxes();this.init_mobile_menu();this.init_fieldsets();this.init_toggles()};this.init_boxes=function(){var e=this;$(".box .toggle").on("click",function(t){$(this).parents(".box").hasClass("open")?e._open_box(this,!0,!0):e._close_box(this,!0,!0);t.preventDefault();return!1});var t,n,r,i;$(".box .toggle").each(function(){t=$(this).parents(".box").attr("id");n=e._get("adminbox-"+t);i=$(this).parents(".box").find(".box-container");r=i.outerHeight();$(this).attr("data-height",r);n==="open"?e._open_box(this,!1,!1):e._close_box(this,!1,!1)})};this._open_box=function(e,t,n){var r,i,s;r=t?!0:!1;i=$(e).parents(".box").attr("id");$(e).parents(".box").removeClass("open");$(e).parents(".box").addClass("closed");s=$(e).attr("data-height");n?$(e).parents(".box").find(".box-container").stop().animate({height:s}):$(e).parents(".box").find(".box-container").height(s);r&&this._save("adminbox-"+i,"open")};this._close_box=function(e,t,n){var r,i;r=t?!0:!1;i=$(e).parents(".box").attr("id");$(e).parents(".box").removeClass("closed");$(e).parents(".box").addClass("open");n?$(e).parents(".box").find(".box-container").stop().animate({height:0}):$(e).parents(".box").find(".box-container").height(0);r&&this._save("adminbox-"+i,"closed")};this._save=function(e,t){if(typeof localStorage=="undefined")this._show_error(window.NAILS.LANG.non_html5);else try{localStorage.setItem(e,t)}catch(n){this._show_error(window.NAILS.LANG.no_save)}};this._get=function(e){if(typeof localStorage=="undefined")this._show_error(window.NAILS.LANG.non_html5);else try{return localStorage.getItem(e)}catch(t){this._show_error(window.NAILS_LANG.no_save)}};this.init_navsearch=function(){var e=this;$(".nav-search input").on("keyup",function(){var t=$(this).val();if(t.length){$(".box .toggle").hide();$(".box li").each(function(){var e=new RegExp(t,"gi");e.test($(this).text())?$(this).show():$(this).hide();var n=$(this).parents(".box").find("ul").outerHeight();$(this).parents(".box").find(".box-container").height(n);$(this).parents(".box").find("li:visible").length?$(this).parents(".box").stop().css({opacity:1}):$(this).parents(".box").stop().css({opacity:.25})})}else{$(".box").stop().animate({opacity:1},"fast");$(".box li").each(function(){$(this).show()});$(".box .toggle").each(function(){$(this).show();var t=e._get("adminbox-"+$(this).parents(".box").attr("id"));t==="closed"?e._close_box(this,!1,!1):e._open_box(this,!1,!1)})}})};this.init_search_boxes=function(){$("div.search select, div.search input[type=checkbox]").on("change",function(){$(this).closest("form").find("input[type=submit]").click()});$("div.search form").on("submit",function(){$(this).closest("div.search").find("div.mask").show()})};this.init_mobile_menu=function(){$("#mobile-menu-main").on("change",function(){var e=$(this).find("option:selected").attr("data-url");e.length&&(window.location.href=window.SITE_URL+e)})};this.init_fieldsets=function(){var e=this,t;$("fieldset:not(.collapsable)").each(function(){t=$("<a>").attr({href:"#","class":"fieldset-toggle"}).html('<span class="show">Show</span><span class="hide">Hide</span>');t.on("click",function(){e._fieldset_toggle($(this));return!1});$(this).prepend(t).addClass("collapsable");$(this).attr("id")&&e._get("fieldset-"+$(this).attr("id"))==="closed"&&$(this).addClass("closed")})};this._fieldset_toggle=function(e){var t=e.closest("fieldset");if(t.hasClass("closed")){t.removeClass("closed");t.attr("id")&&this._save("fieldset-"+t.attr("id"),"open")}else{t.addClass("closed");t.attr("id")&&this._save("fieldset-"+t.attr("id"),"closed")}};this.init_toggles=function(){$.fn.toggles?$(".field.boolean:not(.toggled)").each(function(){var e=$(this).find("input[type=checkbox]"),t=e.prop("disabled"),n=$(this).data("text-on")?$(this).data("text-on"):"ON",r=$(this).data("text-off")?$(this).data("text-off"):"OFF";$(this).find(".toggle").css({width:"100px",height:"30px"}).toggles({checkbox:e,click:!t,clicker:e,on:e.is(":checked"),text:{on:n,off:r}});$(this).addClass("toggled");e.hide()}):this.error("NAILS_ADMIN_JS: jQuery Toggles not available.")};this._show_error=function(e){$(".js_error span.message").text(e);$(".js_error").slideDown().delay(this.error_delay).slideUp();return!0};this.error=function(e){window.console&&ENVIRONMENT!=="production"&&console.error(e)}};