if("undefined"==typeof console){var console;console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}}var NAILS_Admin;NAILS_Admin=function(){this.error_delay=6e3,this.init=function(){this.init_boxes(),this.init_navsearch(),this.init_search_boxes(),this.init_mobile_menu(),this.init_fieldsets(),this.init_toggles(),this.init_ckeditor(),this.init_select2()},this.init_boxes=function(){var t=this;$(".box .toggle").on("click",function(i){return $(this).parents(".box").hasClass("open")?t._open_box(this,!0,!0):t._close_box(this,!0,!0),i.preventDefault(),!1});var i,e,o,s;$(".box .toggle").each(function(){i=$(this).parents(".box").attr("id"),e=t._get("adminbox-"+i),s=$(this).parents(".box").find(".box-container"),o=s.outerHeight(),$(this).attr("data-height",o),"open"===e?t._open_box(this,!1,!1):t._close_box(this,!1,!1)})},this._open_box=function(t,i,e){var o,s,n;o=i?!0:!1,s=$(t).parents(".box").attr("id"),$(t).parents(".box").removeClass("open"),$(t).parents(".box").addClass("closed"),n=$(t).attr("data-height"),e?$(t).parents(".box").find(".box-container").stop().animate({height:n}):$(t).parents(".box").find(".box-container").height(n),o&&this._save("adminbox-"+s,"open")},this._close_box=function(t,i,e){var o,s;o=i?!0:!1,s=$(t).parents(".box").attr("id"),$(t).parents(".box").removeClass("closed"),$(t).parents(".box").addClass("open"),e?$(t).parents(".box").find(".box-container").stop().animate({height:0}):$(t).parents(".box").find(".box-container").height(0),o&&this._save("adminbox-"+s,"closed")},this._save=function(t,i){if("undefined"==typeof localStorage)this._show_error(window.NAILS.LANG.non_html5);else try{localStorage.setItem(t,i)}catch(e){this._show_error(window.NAILS.LANG.no_save)}},this._get=function(t){if("undefined"==typeof localStorage)this._show_error(window.NAILS.LANG.non_html5);else try{return localStorage.getItem(t)}catch(i){this._show_error(window.NAILS_LANG.no_save)}},this.init_navsearch=function(){var t=this;$(".nav-search input").on("keyup",function(){var i=$(this).val();i.length?($(".box .toggle").hide(),$(".box li").each(function(){var t=new RegExp(i,"gi");t.test($(this).text())?$(this).show():$(this).hide();var e=$(this).parents(".box").find("ul").outerHeight();$(this).parents(".box").find(".box-container").height(e),$(this).parents(".box").stop().css($(this).parents(".box").find("li:visible").length?{opacity:1}:{opacity:.25})})):($(".box").stop().animate({opacity:1},"fast"),$(".box li").each(function(){$(this).show()}),$(".box .toggle").each(function(){$(this).show();var i=t._get("adminbox-"+$(this).parents(".box").attr("id"));"closed"===i?t._close_box(this,!1,!1):t._open_box(this,!1,!1)}))})},this.init_search_boxes=function(){$("div.search select, div.search input[type=checkbox]").on("change",function(){$(this).closest("form").find("input[type=submit]").click()}),$("div.search form").on("submit",function(){$(this).closest("div.search").find("div.mask").show()})},this.init_mobile_menu=function(){$("#mobile-menu-main").on("change",function(){var t=$(this).find("option:selected").attr("data-url");t.length&&(window.location.href=window.SITE_URL+t)})},this.init_fieldsets=function(){var t=this,i;$("fieldset:not(.collapsable)").each(function(){i=$("<a>").attr({href:"#","class":"fieldset-toggle"}).html('<span class="show">Show</span><span class="hide">Hide</span>'),i.on("click",function(){return t._fieldset_toggle($(this)),!1}),$(this).prepend(i).addClass("collapsable"),$(this).attr("id")&&"closed"===t._get("fieldset-"+$(this).attr("id"))&&$(this).addClass("closed")})},this._fieldset_toggle=function(t){var i=t.closest("fieldset");i.hasClass("closed")?(i.removeClass("closed"),i.attr("id")&&this._save("fieldset-"+i.attr("id"),"open")):(i.addClass("closed"),i.attr("id")&&this._save("fieldset-"+i.attr("id"),"closed"))},this.init_toggles=function(){$.fn.toggles?$(".field.boolean:not(.toggled)").each(function(){var t=$(this).find("input[type=checkbox]"),i=t.prop("disabled"),e=$(this).data("text-on")?$(this).data("text-on"):"ON",o=$(this).data("text-off")?$(this).data("text-off"):"OFF";$(this).find(".toggle").css({width:"100px",height:"30px"}).toggles({checkbox:t,click:!i,clicker:t,on:t.is(":checked"),text:{on:e,off:o}}),$(this).addClass("toggled"),t.hide()}):this.error("NAILS_ADMIN_JS: jQuery Toggles not available.")},this.init_ckeditor=function(){$.fn.ckeditor?$(".wysiwyg").ckeditor({customConfig:window.NAILS.URL+"js/libraries/ckeditor/ckeditor.config.min.js"}):this.error("NAILS_ADMIN_JS: CKEditor not available.")},this.init_select2=function(){$.fn.select2?$("select.select2").select2():this.error("NAILS_JS: Select2 not available.")},this._show_error=function(t){return $(".js_error span.message").text(t),$(".js_error").slideDown().delay(this.error_delay).slideUp(),!0},this.error=function(t){window.console&&"production"!==window.ENVIRONMENT&&console.error(t)}};